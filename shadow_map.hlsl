//=============================================================================
// シャドウマップ生成用シェーダー
//=============================================================================

// 定数バッファ：ライト視点の行列
cbuffer ConstantBuffer : register(b0)
{
    matrix World; // ワールド行列
    matrix LightViewProj; // ライトのビュー * プロジェクション行列
}

// 頂点シェーダー入力
struct VS_IN
{
    float3 pos : POSITION;
    float3 normal : NORMAL; // 使わないが入力レイアウト合わせのため定義
    float2 uv : TEXCOORD; // 使わないが入力レイアウト合わせのため定義
};

// 頂点シェーダー出力
struct VS_OUT
{
    float4 pos : SV_POSITION; // 描画位置
};

//-----------------------------------------------------------------------------
// 頂点シェーダー
//-----------------------------------------------------------------------------
VS_OUT VS_Main(VS_IN input)
{
    VS_OUT output;

    // ローカル座標 -> ワールド座標
    float4 wPos = mul(float4(input.pos, 1.0f), World);
    
    // ワールド座標 -> ライトのクリップ空間座標
    output.pos = mul(wPos, LightViewProj);

    return output;
}

//-----------------------------------------------------------------------------
// ピクセルシェーダー
//-----------------------------------------------------------------------------
void PS_Main(VS_OUT input)
{
    // 何もしない。
    // 深度バッファへの書き込みはDirectXの機能で自動的に行われるため、
    // ここで色を出力する必要はない。
}